{"remainingRequest":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/www/wwwroot/vue/src/views/Detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/www/wwwroot/vue/src/views/Detail.vue","mtime":1627217647227},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js","mtime":1627220017809},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js","mtime":1627220029206}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG9uTW91bnRlZCwgcmVhY3RpdmUsIHJlZiwgdG9SZWZzIH0gZnJvbSAndnVlJwppbXBvcnQgeyB1c2VSb3V0ZSwgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcicKaW1wb3J0IEhlYWRlciBmcm9tICcuLi9jb21wb25lbnRzL0hlYWRlci52dWUnCmltcG9ydCBQb3BBZGQgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3BBZGQudnVlJwppbXBvcnQgeyB0eXBlTWFwIH0gZnJvbSAnLi4vdXRpbHMnCmltcG9ydCBheGlvcyBmcm9tICcuLi91dGlscy9heGlvcycKaW1wb3J0IHsgVG9hc3QsIERpYWxvZyB9IGZyb20gJ3ZhbnQnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGV0YWlsJywKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXIsCiAgICBQb3BBZGQKICB9LAogIHNldHVwKCkgewogICAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZSgpCiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKQogICAgY29uc3QgeyBpZCB9ID0gcm91dGUucXVlcnkKICAgIGNvbnN0IHBvcEFkZFJlZiA9IHJlZihudWxsKQogICAgY29uc3Qgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIHR5cGVNYXAsCiAgICAgIGRldGFpbDoge30KICAgIH0pCgogICAgb25Nb3VudGVkKGFzeW5jICgpID0+IHsKICAgICAgZ2V0RGV0YWlsKCkKICAgIH0pCiAgICAvLyDojrflj5botKbljZXor6bmg4Xmlrnms5UKICAgIGNvbnN0IGdldERldGFpbCA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQoYC9iaWxsL2RldGFpbD9pZD0ke2lkfWApCiAgICAgIHN0YXRlLmRldGFpbCA9IGRhdGEKICAgIH0KICAgIC8vIOaJk+W8gOe8lui+keW8ueeql+aWueazlQogICAgY29uc3Qgb3Blbk1vZGFsID0gKCkgPT4gewogICAgICBwb3BBZGRSZWYudmFsdWUudG9nZ2xlKCkKICAgIH0KCiAgICAvLyDliKDpmaTmlrnms5UKICAgIGNvbnN0IGRlbGV0ZURldGFpbCA9ICgpID0+IHsKICAgICAgRGlhbG9nLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAn5Yig6ZmkJywKICAgICAgICBtZXNzYWdlOiAn56Gu6K6k5Yig6Zmk6LSm5Y2V77yfJywKICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KCcvYmlsbC9kZWxldGUnLCB7IGlkIH0pCiAgICAgICAgVG9hc3Quc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgICByb3V0ZXIuYmFjaygpCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIC4uLnRvUmVmcyhzdGF0ZSksCiAgICAgIHBvcEFkZFJlZiwKICAgICAgb3Blbk1vZGFsLAogICAgICBnZXREZXRhaWwsCiAgICAgIGRlbGV0ZURldGFpbAogICAgfQogIH0KfQo="},{"version":3,"sources":["/www/wwwroot/vue/src/views/Detail.vue"],"names":[],"mappings":";AAgCA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACX,CAAC;;IAED,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC;IACD,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;MAC5B,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACxD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACpB;IACA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;MACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB;;IAEA,CAAC,EAAE,CAAC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QAClB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC;QACxD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACnB;;IAEA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACb;EACF;AACF","file":"/www/wwwroot/vue/src/views/Detail.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"detail\">\n    <Header title='账单详情' />\n    <div class=\"card\">\n      <div class=\"type\">\n        <span :class=\"{ expense: detail.pay_type == 1, income: detail.pay_type == 2 }\">\n          <i class=\"iconfont\" :class=\"detail.type_id ? typeMap[detail.type_id].icon : 0\" />\n        </span>\n        <span>{{ detail.type_name || '' }}</span>\n      </div>\n      <div class=\"amount expense\" v-if=\"detail.pay_type == 1\">-{{ detail.amount }}</div>\n      <div class=\"amount incom\" v-else>+{{ detail.amount }}</div>\n      <div class=\"info\">\n        <div class=\"time\">\n          <span>记录时间</span>\n          <span>{{ $filters.transYDM(Number(detail.date)) }}</span>\n        </div>\n        <div class=\"remark\">\n          <span>备注</span>\n          <span>{{ detail.remark || '-' }}</span>\n        </div>\n      </div>\n      <div class=\"operation van-hairline--top\">\n        <span class=\"van-hairline--right\" @click=\"deleteDetail\"><van-icon name=\"delete\" />删除</span>\n        <span @click=\"openModal\"><van-icon name=\"edit\" />编辑</span>\n      </div>\n      <PopAdd v-if=\"detail.id\" ref=\"popAddRef\" :detail=\"detail\" @refresh=\"getDetail\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, reactive, ref, toRefs } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport Header from '../components/Header.vue'\nimport PopAdd from '../components/PopAdd.vue'\nimport { typeMap } from '../utils'\nimport axios from '../utils/axios'\nimport { Toast, Dialog } from 'vant'\nexport default {\n  name: 'Detail',\n  components: {\n    Header,\n    PopAdd\n  },\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const { id } = route.query\n    const popAddRef = ref(null)\n    const state = reactive({\n      typeMap,\n      detail: {}\n    })\n\n    onMounted(async () => {\n      getDetail()\n    })\n    // 获取账单详情方法\n    const getDetail = async () => {\n      const { data } = await axios.get(`/bill/detail?id=${id}`)\n      state.detail = data\n    }\n    // 打开编辑弹窗方法\n    const openModal = () => {\n      popAddRef.value.toggle()\n    }\n\n    // 删除方法\n    const deleteDetail = () => {\n      Dialog.confirm({\n        title: '删除',\n        message: '确认删除账单？',\n      }).then(async () => {\n        const { data } = await axios.post('/bill/delete', { id })\n        Toast.success('删除成功')\n        router.back()\n      }).catch(() => {})\n    }\n\n    return {\n      ...toRefs(state),\n      popAddRef,\n      openModal,\n      getDetail,\n      deleteDetail\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n  @import url('../config/custom.less');\n  .detail {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    background-color: #f5f5f5;\n    padding: 12px 24px 0 24px;\n  }\n  .card {\n    border-radius: 12px;\n    background-color: #fff;\n    padding: 0 12px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    .type {\n      padding: 24px 0 12px 0;\n      span:nth-of-type(1) {\n        display: inline-block;\n        width: 22px;\n        height: 22px;\n        color: #fff;\n        border-radius: 50%;\n        text-align: center;\n        line-height: 20px;\n        margin-right: 8px;\n      }\n      .expense {\n        background-color: @primary;\n      }\n      .income {\n        background-color: @text-warning;\n      }\n    }\n    .amount {\n      font-size: 24px;\n      font-weight: 600;\n      margin-bottom: 24px;\n    }\n    .info {\n      width: 100%;\n      font-size: 14px;\n      text-align: left;\n      .time {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        margin-bottom: 12px;\n        span:nth-of-type(1) {\n          flex: 3;\n          color: @color-text-caption;\n        }\n        span:nth-of-type(2) {\n          flex: 9;\n        }\n      }\n      .remark {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        margin-bottom: 12px;\n        span:nth-of-type(1) {\n          flex: 3;\n          color: @color-text-caption;\n        }\n        span:nth-of-type(2) {\n          flex: 9;\n          color: @color-text-base;\n        }\n      }\n    }\n    .operation {\n      width: 100%;\n      height: 50px;\n      display: flex;\n      align-items: center;\n      font-size: 16px;\n      .van-icon {\n        margin-right: 4px;\n      }\n      span {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        flex: 1\n      }\n      span:nth-of-type(1) {\n        color: red;\n      }\n    }\n  }\n</style>"]}]}