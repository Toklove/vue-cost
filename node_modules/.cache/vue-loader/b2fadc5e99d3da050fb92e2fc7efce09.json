{"remainingRequest":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/www/wwwroot/vue/src/views/Home.vue?vue&type=template&id=fae5bece&scoped=true","dependencies":[{"path":"/www/wwwroot/vue/src/views/Home.vue","mtime":1627217647227},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js","mtime":1627220017809},{"path":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1627220029206},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js","mtime":1627220029206}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iaG9tZSI+CiAgICA8ZGl2IGNsYXNzPSJoZWFkZXIiPgogICAgICA8ZGl2IGNsYXNzPSJ0eXBlLXdyYXAiIEBjbGljaz0idG9nZ2xlIj4KICAgICAgICA8c3BhbiBjbGFzcz0idGl0bGUiPnt7IGN1cnJlbnRTZWxlY3QubmFtZSB8fCAn5YWo6YOo57G75Z6LJyB9fTwvc3Bhbj4KICAgICAgICA8aSBjbGFzcz0iaWNvbmZvbnQgbGVpeGluZyIgLz4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImRhdGEtd3JhcCI+CiAgICAgICAgPHNwYW4gY2xhc3M9InRpbWUiIEBjbGljaz0ibW9udGhUb2dnbGUiPnt7IGN1cnJlbnRUaW1lIH19IDxpIGNsYXNzPSJpY29uZm9udCBzb3J0LWRvd24iIC8+PC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJleHBlbnNlIj7mgLvmlK/lh7ogwqV7eyB0b3RhbEV4cGVuc2UgfX08L3NwYW4+CiAgICAgICAgPHNwYW4gY2xhc3M9ImluY29tZSI+5oC75pS25YWlIMKle3sgdG90YWxJbmNvbWUgfX08L3NwYW4+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjb250ZW50LXdyYXAiPgogICAgICA8dmFuLXB1bGwtcmVmcmVzaCB2LW1vZGVsPSJyZWZyZXNoaW5nIiBAcmVmcmVzaD0ib25SZWZyZXNoIj4KICAgICAgICA8dmFuLWxpc3QKICAgICAgICAgIHYtbW9kZWw6bG9hZGluZz0ibG9hZGluZyIKICAgICAgICAgIDpmaW5pc2hlZD0iZmluaXNoZWQiCiAgICAgICAgICBmaW5pc2hlZC10ZXh0PSLmsqHmnInmm7TlpJrkuoYiCiAgICAgICAgICBAbG9hZD0ib25Mb2FkIgogICAgICAgID4KICAgICAgICAgIDxDYXJkSXRlbSB2LWZvcj0iaXRlbSBpbiBsaXN0IiA6YmlsbD0iaXRlbSIgOmtleT0iaXRlbSIgLz4KICAgICAgICA8L3Zhbi1saXN0PgogICAgICA8L3Zhbi1wdWxsLXJlZnJlc2g+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImFkZCIgQGNsaWNrPSJhZGRUb2dnbGUiPgogICAgICA8dmFuLWljb24gbmFtZT0icmVjb3JkcyIgLz4KICAgIDwvZGl2PgogICAgPFBvcFR5cGUgcmVmPSJwb3BSZWYiIEBzZWxlY3Q9InNlbGVjdCIgLz4KICAgIDxQb3BNb250aCByZWY9InBvcE1vbnRoUmVmIiBAc2VsZWN0PSJzZWxlY3RNb250aCIgLz4KICAgIDxQb3BBZGQgcmVmPSJwb3BBZGRSZWYiIEByZWZyZXNoPSJvblJlZnJlc2giIC8+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["/www/wwwroot/vue/src/views/Home.vue"],"names":[],"mappings":"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AC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACxC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAChD,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/www/wwwroot/vue/src/views/Home.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"header\">\n      <div class=\"type-wrap\" @click=\"toggle\">\n        <span class=\"title\">{{ currentSelect.name || '全部类型' }}</span>\n        <i class=\"iconfont leixing\" />\n      </div>\n      <div class=\"data-wrap\">\n        <span class=\"time\" @click=\"monthToggle\">{{ currentTime }} <i class=\"iconfont sort-down\" /></span>\n        <span class=\"expense\">总支出 ¥{{ totalExpense }}</span>\n        <span class=\"income\">总收入 ¥{{ totalIncome }}</span>\n      </div>\n    </div>\n    <div class=\"content-wrap\">\n      <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n        <van-list\n          v-model:loading=\"loading\"\n          :finished=\"finished\"\n          finished-text=\"没有更多了\"\n          @load=\"onLoad\"\n        >\n          <CardItem v-for=\"item in list\" :bill=\"item\" :key=\"item\" />\n        </van-list>\n      </van-pull-refresh>\n    </div>\n    <div class=\"add\" @click=\"addToggle\">\n      <van-icon name=\"records\" />\n    </div>\n    <PopType ref=\"popRef\" @select=\"select\" />\n    <PopMonth ref=\"popMonthRef\" @select=\"selectMonth\" />\n    <PopAdd ref=\"popAddRef\" @refresh=\"onRefresh\" />\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs } from 'vue'\nimport CardItem from '../components/CardItem.vue'\nimport PopType from '../components/PopType.vue'\nimport PopMonth from '../components/PopMonth.vue'\nimport PopAdd from '../components/PopAdd.vue'\nimport axios from '../utils/axios'\nimport dayjs from 'dayjs'\nexport default {\n  components: {\n    CardItem,\n    PopType,\n    PopMonth,\n    PopAdd\n  },\n  setup() {\n    const popRef = ref(null)\n    const popMonthRef = ref(null)\n    const popAddRef = ref(null)\n    const state = reactive({\n      totalExpense: 0,\n      totalIncome: 0,\n      page: 1,\n      totalPage: 0,\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      currentSelect: {},\n      currentTime: dayjs().format('YYYY-MM')\n    })\n\n    const getBillList = async () => {\n      const { data } = await axios.get(`/bill/list?date=${state.currentTime}&type_id=${state.currentSelect.id || 'all'}&page=${state.page}&page_size=5`)\n      if (state.refreshing) {\n        state.list = []\n        state.refreshing = false\n      }\n      state.loading = false\n      state.list = state.list.concat(data.list)\n      state.totalExpense = data.totalExpense.toFixed(2)\n      state.totalIncome = data.totalIncome.toFixed(2)\n      state.totalPage = data.totalPage\n      if (state.page >= state.totalPage) state.finished = true\n    }\n\n    const onLoad = () => {\n      if (!state.refreshing && state.page < state.totalPage) {\n        state.page = state.page + 1\n      }\n      getBillList()\n    }\n\n    const onRefresh = () => {\n      // 清空列表数据\n      state.finished = false;\n      // 页数重制\n      state.page = 1\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      state.refreshing = true\n      state.loading = true;\n      onLoad()\n    }\n    // 类型弹窗开关\n    const toggle = () => {\n      popRef.value.toggle()\n    }\n    // 筛选类型\n    const select = (item) => {\n      state.currentSelect = item\n      onRefresh()\n    }\n    // 月份弹窗开关\n    const monthToggle = () => {\n      popMonthRef.value.toggle()\n    }\n    // 筛选月份\n    const selectMonth = (item) => {\n      state.currentTime = item\n      onRefresh()\n    }\n    // 添加账单弹窗开关\n    const addToggle = () => {\n      console.log('popAddRef', popAddRef)\n      popAddRef.value.toggle()\n    }\n\n    return {\n      ...toRefs(state),\n      popRef,\n      popMonthRef,\n      popAddRef,\n      toggle,\n      monthToggle,\n      addToggle,\n      onLoad,\n      onRefresh,\n      select,\n      selectMonth\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n@import url('../config/custom.less');\n\n.home {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding-top: 80px;\n  .header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    width: 100%;\n    height: 80px;\n    background-color: @primary;\n    color: #fff;\n    font-size: 14px;\n    padding: 20px 20px;\n    z-index: 100;\n    .type-wrap {\n      background-color: #50ca84;\n      display: inline-block;\n      padding: 6px;\n      border-radius: 4px;\n      position: relative;\n      align-self: baseline;\n      .title {\n        margin-right: 22px;\n      }\n      .title::after {\n        content: '';\n        position: absolute;\n        top: 12px;\n        bottom: 11px;\n        right: 32px;\n        width: 1px;\n        background-color: #e9e9e9;\n      }\n    }\n    .data-wrap {\n      margin-top: 10px;\n      font-size: 13px;\n      .time {\n        margin-right: 12px;\n        .sort-down {\n          font-size: 12px;\n        }\n      }\n      .expense {\n        margin-right: 10px;\n      }\n    }\n  }\n  .content-wrap {\n    height: calc(~\"(100% - 50px)\");\n    overflow: hidden;\n    overflow-y: scroll;\n    background-color: #f5f5f5;\n    padding: 10px;\n    // padding-bottom: 50px;\n  }\n  .add {\n    position: fixed;\n    bottom: 100px;\n    right: 30px;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 1px solid #e9e9e9;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 20px;\n    background-color: #fff;\n    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.2);\n    color: @primary;\n  }\n}\n</style>"]}]}