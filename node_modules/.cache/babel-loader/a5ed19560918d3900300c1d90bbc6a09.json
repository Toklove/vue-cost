{"remainingRequest":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js!/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/www/wwwroot/vue/src/views/Account.vue?vue&type=script&lang=js","dependencies":[{"path":"/www/wwwroot/vue/src/views/Account.vue","mtime":1627217647227},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js","mtime":1627220017809},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js","mtime":1627220029206}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL3d3dy93d3dyb290L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZS9sZXNzIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL3d3dy93d3dyb290L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhlYWRlciBmcm9tICcuLi9jb21wb25lbnRzL0hlYWRlci52dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vdXRpbHMvYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FjY291bnQnLAogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlcjogSGVhZGVyCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICBvbGRQYXNzOiAnJywKICAgICAgbmV3UGFzczogJycsCiAgICAgIG5ld1Bhc3MyOiAnJwogICAgfSk7IC8vIOS/ruaUueWvhueggQoKICAgIHZhciBoYW5kbGVPayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfYXhpb3MkcG9zdCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUubmV3UGFzcyAhPSBzdGF0ZS5uZXdQYXNzMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9Ub2FzdC5mYWlsKCfmlrDlr4bnoIHkuI3kuIDoh7QnKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2F4aW9zJHBvc3QgPSBheGlvcy5wb3N0KCcvdXNlci9tb2RpZnlfcGFzcycsIHsKICAgICAgICAgICAgICAgICAgb2xkX3Bhc3M6IHN0YXRlLm9sZFBhc3MsCiAgICAgICAgICAgICAgICAgIG5ld19wYXNzOiBzdGF0ZS5uZXdQYXNzLAogICAgICAgICAgICAgICAgICBuZXdfcGFzczI6IHN0YXRlLm5ld1Bhc3MyCiAgICAgICAgICAgICAgICB9KSwgZGF0YSA9IF9heGlvcyRwb3N0LmRhdGE7CgogICAgICAgICAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZU9rKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7IC8vIOmAgOWHuueZu+W9lQoKCiAgICB2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgIH0pOwogICAgfTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgaGFuZGxlT2s6IGhhbmRsZU9rLAogICAgICBsb2dvdXQ6IGxvZ291dAogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["/www/wwwroot/vue/src/views/Account.vue"],"names":[],"mappings":";;;;;AA+BA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,OAAO,MAAP,MAAmB,0BAAnB;AACA,OAAO,KAAP,MAAkB,gBAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,MAAK,EAAL;AADU,GAFC;AAKb,EAAA,KALa,mBAKL;AACN,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,OAAO,EAAE,KADY;AAErB,MAAA,OAAO,EAAE,EAFY;AAGrB,MAAA,OAAO,EAAE,EAHY;AAIrB,MAAA,QAAQ,EAAE;AAJW,KAAD,CAAtB,CAFM,CASN;;AACA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBACX,KAAK,CAAC,OAAN,IAAiB,KAAK,CAAC,QADZ;AAAA;AAAA;AAAA;;AAEb,uBAAM,IAAN,CAAW,QAAX;;AAFa;;AAAA;AAAA,8BAKE,KAAK,CAAC,IAAN,CAAW,mBAAX,EAAgC;AAC/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAD+B;AAE/C,kBAAA,QAAQ,EAAE,KAAK,CAAC,OAF+B;AAG/C,kBAAA,SAAS,EAAE,KAAK,CAAC;AAH8B,iBAAhC,CALF,EAKP,IALO,eAKP,IALO;;AAWf,uBAAM,OAAN,CAAc,MAAd;;AAXe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb,CAVM,CAwBN;;;AACA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACnB,MAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;AACA,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE;AAAR,OAAZ;AACF,KAHA;;AAKA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,QAAQ,EAAR,QAFF;AAGE,MAAA,MAAK,EAAL;AAHF;AAKF;AAxCa,CAAf","sourcesContent":["<template>\n  <div class=\"account\">\n    <Header title=\"账户安全\" />\n    <van-cell title=\"密码修改\" @click=\"visible = true\" is-link />\n    <van-button class=\"logout\" type=\"primary\" size=\"large\" @click=\"logout\">退出登录</van-button>\n    <van-dialog class=\"modal-pass\" v-model:show=\"visible\" @confirm=\"handleOk\" title=\"修改密码\" show-cancel-button>\n      <van-cell-group>\n        <van-field\n          v-model=\"oldPass\"\n          label=\"原密码\"\n          clearable\n          placeholder=\"请输入原密码\"\n        />\n        <van-field\n          v-model=\"newPass\"\n          label=\"新密码\"\n          clearable\n          placeholder=\"请输入新密码\"\n        />\n        <van-field\n          v-model=\"newPass2\"\n          label=\"确认密码\"\n          clearable\n          placeholder=\"再次输入确认\"\n        />\n      </van-cell-group>\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { Toast } from 'vant'\nimport Header from '../components/Header.vue'\nimport axios from '../utils/axios'\n\nexport default {\n  name: 'Account',\n  components: {\n    Header\n  },\n  setup() {\n    const router = useRouter()\n    const state = reactive({\n      visible: false,\n      oldPass: '',\n      newPass: '',\n      newPass2: ''\n    })\n\n    // 修改密码\n    const handleOk = async () => {\n      if (state.newPass != state.newPass2) {\n        Toast.fail('新密码不一致')\n        return\n      }\n      const { data } = axios.post('/user/modify_pass', {\n        old_pass: state.oldPass,\n        new_pass: state.newPass,\n        new_pass2: state.newPass2\n      })\n\n      Toast.success('修改成功')\n    }\n\n    // 退出登录\n    const logout = () => {\n      localStorage.removeItem('token')\n      router.push({ path: '/login' })\n    }\n\n    return {\n      ...toRefs(state),\n      handleOk,\n      logout\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n  @import url('../config/custom.less');\n  .account {\n    min-height: 100%;\n    background-color: #f5f5f5;\n    \n    .logout {\n      display: block;\n      margin: 0 auto;\n      width: 90%;\n      margin-top: 20px;\n      background-color: @primary;\n      border-color: @primary;\n    }\n    .modal-pass {\n      .van-dialog__header {\n        padding: 10px 0;\n      }\n      .van-dialog__content {\n        .van-cell-group {\n          padding: 20px;\n        }\n      }\n    }\n  }\n</style>"],"sourceRoot":""}]}