{"remainingRequest":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js!/www/wwwroot/vue/src/utils/axios.js","dependencies":[{"path":"/www/wwwroot/vue/src/utils/axios.js","mtime":1627217647227},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js","mtime":1627220017809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZS9sZXNzIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL3d3dy93d3dyb290L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT0gJ2RldmVsb3BtZW50JyA/ICcvYXBpJyA6ICcvLzQ3Ljk5LjEzNC4xMjY6NzAwOC9hcGknOwpheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAiIi5jb25jYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgbnVsbCk7CmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIGlmIChfdHlwZW9mKHJlcy5kYXRhKSAhPT0gJ29iamVjdCcpIHsKICAgIF9Ub2FzdC5mYWlsKCfmnI3liqHnq6/lvILluLjvvIEnKTsKCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTsKICB9CgogIGlmIChyZXMuZGF0YS5jb2RlICE9IDIwMCkgewogICAgaWYgKHJlcy5kYXRhLm1zZykgX1RvYXN0LmZhaWwocmVzLmRhdGEubXNnKTsKCiAgICBpZiAocmVzLmRhdGEuY29kZSA9PSA0MDEpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuZGF0YSk7CiAgfQoKICByZXR1cm4gcmVzLmRhdGE7Cn0pOwpleHBvcnQgZGVmYXVsdCBheGlvczs="},{"version":3,"sources":["/www/wwwroot/vue/src/utils/axios.js"],"names":["axios","router","defaults","baseURL","process","env","NODE_ENV","withCredentials","headers","localStorage","getItem","post","interceptors","response","use","res","data","fail","Promise","reject","code","msg","push","path"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,WAAnB;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,aAAxB,GAAwC,MAAxC,GAAiD,0BAA1E;AACAN,KAAK,CAACE,QAAN,CAAeK,eAAf,GAAiC,IAAjC;AACAP,KAAK,CAACE,QAAN,CAAeM,OAAf,CAAuB,kBAAvB,IAA6C,gBAA7C;AACAR,KAAK,CAACE,QAAN,CAAeM,OAAf,CAAuB,eAAvB,cAA6CC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,IAA9E;AACAV,KAAK,CAACE,QAAN,CAAeM,OAAf,CAAuBG,IAAvB,CAA4B,cAA5B,IAA8C,kBAA9C;AAEAX,KAAK,CAACY,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,UAAAC,GAAG,EAAI;AACrC,MAAI,QAAOA,GAAG,CAACC,IAAX,MAAoB,QAAxB,EAAkC;AAChC,WAAMC,IAAN,CAAW,QAAX;;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeJ,GAAf,CAAP;AACD;;AACD,MAAIA,GAAG,CAACC,IAAJ,CAASI,IAAT,IAAiB,GAArB,EAA0B;AACxB,QAAIL,GAAG,CAACC,IAAJ,CAASK,GAAb,EAAkB,OAAMJ,IAAN,CAAWF,GAAG,CAACC,IAAJ,CAASK,GAApB;;AAClB,QAAIN,GAAG,CAACC,IAAJ,CAASI,IAAT,IAAiB,GAArB,EAA0B;AACxBnB,MAAAA,MAAM,CAACqB,IAAP,CAAY;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAZ;AAED;;AACD,WAAOL,OAAO,CAACC,MAAR,CAAeJ,GAAG,CAACC,IAAnB,CAAP;AACD;;AAED,SAAOD,GAAG,CAACC,IAAX;AACD,CAfD;AAiBA,eAAehB,KAAf","sourcesContent":["import axios from 'axios'\nimport { Toast } from 'vant'\nimport router from '../router'\n\naxios.defaults.baseURL = process.env.NODE_ENV == 'development' ? '/api' : '//47.99.134.126:7008/api'\naxios.defaults.withCredentials = true\naxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\naxios.defaults.headers['Authorization'] = `${localStorage.getItem('token') || null}`\naxios.defaults.headers.post['Content-Type'] = 'application/json'\n\naxios.interceptors.response.use(res => {\n  if (typeof res.data !== 'object') {\n    Toast.fail('服务端异常！')\n    return Promise.reject(res)\n  }\n  if (res.data.code != 200) {\n    if (res.data.msg) Toast.fail(res.data.msg)\n    if (res.data.code == 401) {\n      router.push({ path: '/login' })\n      \n    }\n    return Promise.reject(res.data)\n  }\n\n  return res.data\n})\n\nexport default axios\n"]}]}