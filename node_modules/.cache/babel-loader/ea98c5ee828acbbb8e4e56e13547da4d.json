{"remainingRequest":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js!/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/www/wwwroot/vue/src/views/Detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/www/wwwroot/vue/src/views/Detail.vue","mtime":1627217647227},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/babel-loader/lib/index.js","mtime":1627220017809},{"path":"/www/wwwroot/vue/node_modules/cache-loader/dist/cjs.js","mtime":1627220017878},{"path":"/www/wwwroot/vue/node_modules/vue-loader-v16/dist/index.js","mtime":1627220029206}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL3d3dy93d3dyb290L3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAidmFudC9lcy90b2FzdC9zdHlsZS9sZXNzIjsKaW1wb3J0IF9Ub2FzdCBmcm9tICJ2YW50L2VzL3RvYXN0IjsKaW1wb3J0ICJ2YW50L2VzL2RpYWxvZy9zdHlsZS9sZXNzIjsKaW1wb3J0IF9EaWFsb2cgZnJvbSAidmFudC9lcy9kaWFsb2ciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvd3d3L3d3d3Jvb3QvdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgb25Nb3VudGVkLCByZWFjdGl2ZSwgcmVmLCB0b1JlZnMgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSwgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9IZWFkZXIudnVlJzsKaW1wb3J0IFBvcEFkZCBmcm9tICcuLi9jb21wb25lbnRzL1BvcEFkZC52dWUnOwppbXBvcnQgeyB0eXBlTWFwIH0gZnJvbSAnLi4vdXRpbHMnOwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vdXRpbHMvYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RldGFpbCcsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyOiBIZWFkZXIsCiAgICBQb3BBZGQ6IFBvcEFkZAogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciBpZCA9IHJvdXRlLnF1ZXJ5LmlkOwogICAgdmFyIHBvcEFkZFJlZiA9IHJlZihudWxsKTsKICAgIHZhciBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgdHlwZU1hcDogdHlwZU1hcCwKICAgICAgZGV0YWlsOiB7fQogICAgfSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBnZXREZXRhaWwoKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOyAvLyDojrflj5botKbljZXor6bmg4Xmlrnms5UKCiAgICB2YXIgZ2V0RGV0YWlsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3lpZWxkJGF4aW9zJGdldCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9iaWxsL2RldGFpbD9pZD0iLmNvbmNhdChpZCkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkYXhpb3MkZ2V0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGF4aW9zJGdldC5kYXRhOwogICAgICAgICAgICAgICAgc3RhdGUuZGV0YWlsID0gZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGdldERldGFpbCgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsgLy8g5omT5byA57yW6L6R5by556qX5pa55rOVCgoKICAgIHZhciBvcGVuTW9kYWwgPSBmdW5jdGlvbiBvcGVuTW9kYWwoKSB7CiAgICAgIHBvcEFkZFJlZi52YWx1ZS50b2dnbGUoKTsKICAgIH07IC8vIOWIoOmZpOaWueazlQoKCiAgICB2YXIgZGVsZXRlRGV0YWlsID0gZnVuY3Rpb24gZGVsZXRlRGV0YWlsKCkgewogICAgICBfRGlhbG9nLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAn5Yig6ZmkJywKICAgICAgICBtZXNzYWdlOiAn56Gu6K6k5Yig6Zmk6LSm5Y2V77yfJwogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3lpZWxkJGF4aW9zJHBvc3QsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL2JpbGwvZGVsZXRlJywgewogICAgICAgICAgICAgICAgICBpZDogaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkYXhpb3MkcG9zdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRheGlvcyRwb3N0LmRhdGE7CgogICAgICAgICAgICAgICAgX1RvYXN0LnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwoKICAgICAgICAgICAgICAgIHJvdXRlci5iYWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSlbImNhdGNoIl0oZnVuY3Rpb24gKCkge30pOwogICAgfTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgcG9wQWRkUmVmOiBwb3BBZGRSZWYsCiAgICAgIG9wZW5Nb2RhbDogb3Blbk1vZGFsLAogICAgICBnZXREZXRhaWw6IGdldERldGFpbCwKICAgICAgZGVsZXRlRGV0YWlsOiBkZWxldGVEZXRhaWwKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["/www/wwwroot/vue/src/views/Detail.vue"],"names":[],"mappings":";;;;;;;AAgCA,SAAS,SAAT,EAAoB,QAApB,EAA8B,GAA9B,EAAmC,MAAnC,QAAiD,KAAjD;AACA,SAAS,QAAT,EAAmB,SAAnB,QAAoC,YAApC;AACA,OAAO,MAAP,MAAmB,0BAAnB;AACA,OAAO,MAAP,MAAmB,0BAAnB;AACA,SAAS,OAAT,QAAwB,UAAxB;AACA,OAAO,KAAP,MAAkB,gBAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,MAAM,EAAN,MADU;AAEV,IAAA,MAAK,EAAL;AAFU,GAFC;AAMb,EAAA,KANa,mBAML;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AAFM,QAGE,EAHF,GAGS,KAAK,CAAC,KAHf,CAGE,EAHF;AAIN,QAAM,SAAQ,GAAI,GAAG,CAAC,IAAD,CAArB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,OAAO,EAAP,OADqB;AAErB,MAAA,MAAM,EAAE;AAFa,KAAD,CAAtB;AAKA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,SAAS;;AADD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT,CAVM,CAaN;;AACA,QAAM,SAAQ;AAAA,0EAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACO,KAAK,CAAC,GAAN,2BAA6B,EAA7B,EADP;;AAAA;AAAA;AACR,gBAAA,IADQ,oBACR,IADQ;AAEhB,gBAAA,KAAK,CAAC,MAAN,GAAe,IAAf;;AAFgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAR,SAAQ;AAAA;AAAA;AAAA,OAAd,CAdM,CAkBN;;;AACA,QAAM,SAAQ,GAAI,SAAZ,SAAY,GAAM;AACtB,MAAA,SAAS,CAAC,KAAV,CAAgB,MAAhB;AACF,KAFA,CAnBM,CAuBN;;;AACA,QAAM,YAAW,GAAI,SAAf,YAAe,GAAM;AACzB,cAAO,OAAP,CAAe;AACb,QAAA,KAAK,EAAE,IADM;AAEb,QAAA,OAAO,EAAE;AAFI,OAAf,EAGG,IAHH,uEAGQ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACiB,KAAK,CAAC,IAAN,CAAW,cAAX,EAA2B;AAAE,kBAAA,EAAC,EAAD;AAAF,iBAA3B,CADjB;;AAAA;AAAA;AACE,gBAAA,IADF,qBACE,IADF;;AAEN,uBAAM,OAAN,CAAc,MAAd;;AACA,gBAAA,MAAM,CAAC,IAAP;;AAHM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHR,aAOS,YAAM,CAAE,CAPjB;AAQF,KATA;;AAWA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,SAAS,EAAT,SAFF;AAGE,MAAA,SAAS,EAAT,SAHF;AAIE,MAAA,SAAS,EAAT,SAJF;AAKE,MAAA,YAAW,EAAX;AALF;AAOF;AAhDa,CAAf","sourcesContent":["<template>\n  <div class=\"detail\">\n    <Header title='账单详情' />\n    <div class=\"card\">\n      <div class=\"type\">\n        <span :class=\"{ expense: detail.pay_type == 1, income: detail.pay_type == 2 }\">\n          <i class=\"iconfont\" :class=\"detail.type_id ? typeMap[detail.type_id].icon : 0\" />\n        </span>\n        <span>{{ detail.type_name || '' }}</span>\n      </div>\n      <div class=\"amount expense\" v-if=\"detail.pay_type == 1\">-{{ detail.amount }}</div>\n      <div class=\"amount incom\" v-else>+{{ detail.amount }}</div>\n      <div class=\"info\">\n        <div class=\"time\">\n          <span>记录时间</span>\n          <span>{{ $filters.transYDM(Number(detail.date)) }}</span>\n        </div>\n        <div class=\"remark\">\n          <span>备注</span>\n          <span>{{ detail.remark || '-' }}</span>\n        </div>\n      </div>\n      <div class=\"operation van-hairline--top\">\n        <span class=\"van-hairline--right\" @click=\"deleteDetail\"><van-icon name=\"delete\" />删除</span>\n        <span @click=\"openModal\"><van-icon name=\"edit\" />编辑</span>\n      </div>\n      <PopAdd v-if=\"detail.id\" ref=\"popAddRef\" :detail=\"detail\" @refresh=\"getDetail\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, reactive, ref, toRefs } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport Header from '../components/Header.vue'\nimport PopAdd from '../components/PopAdd.vue'\nimport { typeMap } from '../utils'\nimport axios from '../utils/axios'\nimport { Toast, Dialog } from 'vant'\nexport default {\n  name: 'Detail',\n  components: {\n    Header,\n    PopAdd\n  },\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const { id } = route.query\n    const popAddRef = ref(null)\n    const state = reactive({\n      typeMap,\n      detail: {}\n    })\n\n    onMounted(async () => {\n      getDetail()\n    })\n    // 获取账单详情方法\n    const getDetail = async () => {\n      const { data } = await axios.get(`/bill/detail?id=${id}`)\n      state.detail = data\n    }\n    // 打开编辑弹窗方法\n    const openModal = () => {\n      popAddRef.value.toggle()\n    }\n\n    // 删除方法\n    const deleteDetail = () => {\n      Dialog.confirm({\n        title: '删除',\n        message: '确认删除账单？',\n      }).then(async () => {\n        const { data } = await axios.post('/bill/delete', { id })\n        Toast.success('删除成功')\n        router.back()\n      }).catch(() => {})\n    }\n\n    return {\n      ...toRefs(state),\n      popAddRef,\n      openModal,\n      getDetail,\n      deleteDetail\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n  @import url('../config/custom.less');\n  .detail {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    background-color: #f5f5f5;\n    padding: 12px 24px 0 24px;\n  }\n  .card {\n    border-radius: 12px;\n    background-color: #fff;\n    padding: 0 12px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    .type {\n      padding: 24px 0 12px 0;\n      span:nth-of-type(1) {\n        display: inline-block;\n        width: 22px;\n        height: 22px;\n        color: #fff;\n        border-radius: 50%;\n        text-align: center;\n        line-height: 20px;\n        margin-right: 8px;\n      }\n      .expense {\n        background-color: @primary;\n      }\n      .income {\n        background-color: @text-warning;\n      }\n    }\n    .amount {\n      font-size: 24px;\n      font-weight: 600;\n      margin-bottom: 24px;\n    }\n    .info {\n      width: 100%;\n      font-size: 14px;\n      text-align: left;\n      .time {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        margin-bottom: 12px;\n        span:nth-of-type(1) {\n          flex: 3;\n          color: @color-text-caption;\n        }\n        span:nth-of-type(2) {\n          flex: 9;\n        }\n      }\n      .remark {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        margin-bottom: 12px;\n        span:nth-of-type(1) {\n          flex: 3;\n          color: @color-text-caption;\n        }\n        span:nth-of-type(2) {\n          flex: 9;\n          color: @color-text-base;\n        }\n      }\n    }\n    .operation {\n      width: 100%;\n      height: 50px;\n      display: flex;\n      align-items: center;\n      font-size: 16px;\n      .van-icon {\n        margin-right: 4px;\n      }\n      span {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        flex: 1\n      }\n      span:nth-of-type(1) {\n        color: red;\n      }\n    }\n  }\n</style>"],"sourceRoot":""}]}